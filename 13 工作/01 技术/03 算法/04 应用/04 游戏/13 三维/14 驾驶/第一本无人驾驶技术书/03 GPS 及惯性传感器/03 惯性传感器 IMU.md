# 惯性传感器 IMU

# 惯性传感器简介

惯性传感器（IMU）主要是检测和测量加速度与旋转运动的传感器。基础的惯性传感器包括加速度计与角速度计。

本节主要讨论基于MEMS的六轴惯性传感器，主要由三个轴加速度传感器及三个轴的陀螺仪组成。[3]

MEMS惯性传感器分为三个级别：

- 低精度惯性传感器作为消费电子类产品主要用在智能手机，此类传感器售价在50美分到几美元不等，测量的误差会比较大。
- 中级惯性传感器主要用于汽车电子稳定系统及GPS辅助导航系统，此类传感器售价在几百到上千美元，相对于低端惯性传感器，中级惯性传感器在控制芯片中对测量误差有一定的修正，所以测量结果更准确。但是长时间运行后，累计的误差会越来越大。
- 高精度的惯性传感器作为军用级和宇航级产品，主要要求高精度、全温区、抗冲击等指数，主要用于通信卫星无线、导弹导引头、光学瞄准系统等稳定性应用。此类传感器售价在几十万美元，即便经过长时间运行后，比如跨太平洋洲际导弹，仍然可以达到米级精度。


无人车使用的一般是中低级的惯性传感器，其特点是更新频率高（1kHz），可以提供实时位置信息。

惯性传感器的致命缺点是它的误差会随着时间的推进而增加，所以我们只能在很短的时间内依赖惯性传感器进行定位。


## 1 加速度计

下图所示为MEMS加速度计，它的工作原理就是靠MEMS中可移动部分的惯性。由于中间电容板的质量很大，而且它是一种悬臂构造，当速度变化或者加速度达到足够大时，它所受到的惯性力超过固定或者支撑它的力，这时它会移动，它跟上下电容板之间的距离就会变化，上下电容就会因此变化。电容的变化与加速度成正比。根据不同测量范围，中间电容板悬臂构造的强度或者弹性系数可以设计得不同。另外，如果要测量不同方向的加速度，这个MEMS的结构会有很大的不同。电容的变化会被另外一块专用芯片转化成电压信号，有时还会把这个电压信号放大。电压信号在数字化后经过一个数字信号处理过程，在零点和灵敏度校正后输出。

<p align="center">
    <img width="70%" height="70%" src="http://images.iterate.site/blog/image/20200208/2dBrq31wnRlD.png?imageslim">
</p>


## 2 角速度计

下图所示为MEMS陀螺仪角速度计（MEMS gyroscope），其工作原理主要是利用角动量守恒原理，因此它主要是一个不停转动的物体，它的转轴指向不随承载它的支架的旋转而变化。与加速度计工作原理相似，陀螺仪的上层活动金属与下层金属形成电容。当陀螺仪转动时，它与下面电容板之间的距离就会变化，上下电容也就会因此变化。电容的变化跟角速度成正比，由此我们可以测量当前的角速度。

<p align="center">
    <img width="70%" height="70%" src="http://images.iterate.site/blog/image/20200208/pDoPjuIF22DT.png?imageslim">
</p>


## 3 惯性传感器的问题

由于制作工艺的原因，惯性传感器测量的数据通常都会有一定误差。

- 第一种误差是偏移误差，也就是陀螺仪和加速度计即使在没有旋转或加速的情况下也会有非零的数据输出。要想得到位移数据，我们需要对加速度计的输出进行两次积分。在两次积分后，即使很小的偏移误差也会被放大，随着时间的推进，这样的偏移误差造成的位移误差会不断积累，最终导致没法再跟踪无人车的位置。
- 第二种误差是比例误差，是指所测量的输出和被检测输入的变化之间的比率。与偏移误差相似，在两次积分后，随着时间的推进，其造成的位移误差会不断积累。
- 第三种误差是背景白噪声，如果不给予纠正，也会导致我们没法再跟踪无人车的位置。

为了纠正这些误差，我们必须对惯性传感器进行校准，找出偏移误差和比例误差，然后使用校准参数对惯性传感器原数据进行修正。但复杂的是惯性传感器的误差也会随着温度变化而变化，所以即使我们校准得再好，随着时间的推进，位移的误差还是会不断积累，所以我们很难单独使用惯性传感器对无人车进行定位。



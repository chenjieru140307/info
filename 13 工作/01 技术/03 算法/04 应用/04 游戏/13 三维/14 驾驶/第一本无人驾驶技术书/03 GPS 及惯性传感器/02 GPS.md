

# GPS简介

GPS是当前行车定位不可或缺的技术，在无人驾驶定位中也担负起相当重要的职责。


GPS系统包括太空中的32颗GPS卫星；地面上1个主控站、3个数据注入站和5个监测站及作为用户端的GPS接收机。最少只需其中3颗卫星，就能迅速确定用户端在地球上所处的位置及海拔高度。现在，民用GPS也可以达到十米左右的定位精度。当前的GPS系统使用低频信号，纵使天气不佳仍能让信号保持相当的穿透性。

本节介绍GPS的运作原理及这个技术的缺陷。

## 1 三边测量法定位

如图所示，GPS定位系统是利用卫星基本三角定位原理，GPS接收装置以量测无线电信号的传输时间来量测距离。由每颗卫星的所在位置，测量每颗卫星至接收器间距离，便可以算出接收器所在位置之三维空间坐标值。使用者只要利用接收装置接收到3个卫星信号，就可以定出使用者所在之位置。在实际应用中，GPS接收装置都是利用4个以上卫星信号来定出使用者所在之位置及高度。三角定位的工作原理如下。

<p align="center">
    <img width="70%" height="70%" src="http://images.iterate.site/blog/image/20200208/t8TYhBUyD7Ie.png?imageslim">
</p>


- （1）假设测量得出第一颗卫星距离我们18000千米，那么可以把当前位置范围限定在距离第一颗卫星18000千米半径的地球表面上的任意位置。
- （2）假设测量到第二颗卫星的距离为20000千米，那么可以进一步把当前位置范围限定在距离第一颗卫星18000千米及距离第二颗卫星20000千米的交叉的区域。
- （3）再对第三颗卫星进行测量，通过3颗卫星的距离交汇点定位出当前的位置。通常，GPS接收器会使用第四颗卫星的位置对前3颗卫星的位置测量进行确认已达到更好的效果。

## 2 距离测量与精准时间戳

理论上，距离测量是个简单的过程，我们只需要用光速乘以信号传播时间便可以得到距离信息。但问题是测量的传播时间但凡有一点误差，都会造成距离上巨大的误差。我们日常使用的时钟是存在一定误差的，如果使用石英钟对传播时间进行测量，那么基于GPS的定位会有很大误差。

为了解决这个问题，每颗卫星上都安装了原子钟以达到纳米级的精度。为了使卫星定位系统使用同步时钟，需要在所有卫星及接收机上都安装原子钟。原子钟的价格在几万美元，要让每一个GPS接收器安装原子钟是不现实的。为了解决这一难题，每一颗卫星上仍然使用昂贵的原子钟，但接收机使用的是经常需要调校的普通石英钟：接收机接收来自四颗或更多卫星的信号并计算自身的误差，因此接收机就可以将自身的时钟调整到统一时间值。

## 3 差分GPS

如上所述，卫星距离测量存在着卫星钟误差与播延迟导致的误差等问题。利用差分技术，我们可以消除或者降低这些误差，让GPS达到更高的精度。

差分GPS的运作原理十分简单，如图所示，首先，如果两个GPS接收机的距离非常接近，那么两者接收的GPS信号将通过几乎同一块大气区域，所以二者的信号将具有非常近似的误差。如果能精确地计算出第一个接收机的误差，那么我们可以利用该计算误差对第二个接收机的结果进行修正。

<p align="center">
    <img width="70%" height="70%" src="http://images.iterate.site/blog/image/20200208/A9WkzS6PY3II.png?imageslim">
</p>

如何精确地计算出第一个接收机的误差呢？可以在已知精准的地点安置参考接收机基准站，安装在基准站上的GPS接收机观测4颗卫星后便可进行三维定位，计算出基准站的测量坐标。

然后，将测量坐标与已知坐标进行对比可以计算出误差。基准站再把误差值发送给方圆100千米内的差分GPS接收器去纠正它们的测量数据。

## 4 多路径问题

如图所示，多路径问题是指由于GPS信号的反射与折射造成的信号传播时间的误差，从而导致定位的错误。特别是在城市环境中，空气中有许多悬浮介质对GPS信号反射与折射，另外，信号也会在高楼大厦的外墙发生反射与折射，造成距离测量的混乱。

目前，高精度的军用差分GPS在静态的时候确实可以在“理想”的环境下达到厘米级的精度。这里的“理想”环境是指大气中没有过多的悬浮介质而且测量时GPS有较强的接收信号。

然而，无人车是在复杂的动态环境中行驶的，尤其在大城市中，GPS多路径反射的问题会更明显。这样得到的GPS定位信息很容易就有几米的误差。对于在有限宽度上高速行驶的汽车，这样的误差很有可能会导致交通事故。

即使有各种问题，GPS还是一个相对精准的传感器，而且GPS的误差不会随着时间的推进而增加。但是GPS有一个更新频率低的问题，大概在10Hz。由于无人车行驶速度快，我们需要实时的精准定位以确保无人车的安全。因此我们必须借助其他的传感器来辅助定位，增强定位的精度。

<p align="center">
    <img width="70%" height="70%" src="http://images.iterate.site/blog/image/20200208/YDhQyRIqP0Q7.png?imageslim">
</p>

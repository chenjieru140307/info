# 工作原理


## 1 工作原理

光学雷达（Light Detection And Ranging，LiDAR）是一种光学遥感技术，它通过首先向目标物体发射一束激光，然后根据接收－反射的时间间隔确定目标物体的实际距离。然后根据距离及激光发射的角度，通过简单的几何变化推导出物体的位置信息。由于激光的传播受外界影响小，LiDAR能够检测的距离一般可达100m以上。

与传统雷达使用无线电波相比较，LiDAR使用激光射线，商用LiDAR使用的激光射线波长一般在600～1000nm，远远低于传统雷达所使用的波长。因此，LiDAR在测量物体距离和表面形状上可达到更高的精准，一般精准度可以达到厘米级。

LiDAR系统一般分为三个部分：

- 第一部分是激光发射器，发射出波长为600～1000nm的激光射线；
- 第二部分是扫描与光学部件，主要用于收集反射点距离与该点发生的时间和水平角度（Azimuth）；
- 第三部分是感光部件，主要检测返回光的强度。因此，我们检测到的每一个点都包括了空间坐标信息（x，y，z）及光强度信息。光强度与物体的光反射度（reflectivity）直接相关，所以从检测到的光强度我们也可以对检测到的物体有初步判断。

## 2 什么是点云

无人车所使用的LiDAR并不是静止不动的。在无人车行驶的过程中，LiDAR同时以一定的角速度匀速转动，在这个过程中不断地发出激光并收集反射点的信息，以便得到全方位的环境信息。

LiDAR在收集反射点距离的过程中也会同时记录下该点发生的时间和水平角度（Azimuth），并且每个激光发射器都有其编号和固定的垂直角度，根据这些数据就可以计算出所有反射点的坐标。<span style="color:red;">什么是水平角度？什么是固定的垂直角度？</span>

LiDAR每旋转一周，收集到的所有反射点坐标的集合就形成了点云（Point Cloud）。

下图为点云产生的坐标示意图：

<p align="center">
    <img width="50%" height="50%" src="http://images.iterate.site/blog/image/20200208/LlcLopLiNdGM.png?imageslim">
</p>

LiDAR通过激光反射可以测出和物体的距离（distance），因为激光的垂直角度是固定的，记作a，这里我们可以直接求出z轴坐标为`sin（a）·distance`。由`cos（a）·distance`可以得到`distance`在xy平面的投影，记作`xy_dist`。LiDAR在记录反射点距离的同时也会记录下当前LiDAR转动的水平角度b，这样根据简单的集合转换就可以得到该点的x、y坐标分别为`cos（b）·xy_dist`和`sin（b）·xy_dist`。

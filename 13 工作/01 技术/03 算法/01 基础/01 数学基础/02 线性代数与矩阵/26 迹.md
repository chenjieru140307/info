
# 迹


迹：

- 矩阵对角元素的和

$$
\operatorname{tr}(\boldsymbol{A})=\sum_{i} \boldsymbol{A}_{i, i}
$$


作用：

- F 范数（Frobenius）的描述
  - F 范数是矩阵的各个元素平方之和再开平方根，它通常也叫做矩阵的 L2 范数，它的优点在于它是一个凸函数，可以求导求解。$\Vert A\Vert_F=\sqrt{(\sum_{i=1}^m\sum_{j=1}^n{| a_{ij}|}^2)}$
  - 迹运算提供了另一种描述矩阵 Frobenius 范数的方式：$\|A\|_{F}=\sqrt{\operatorname{tr}\left(\boldsymbol{A} \boldsymbol{A}^{\top}\right)}$
- 迹运算在转置运算下是不变的：
$$
\operatorname{tr}(\boldsymbol{A})=\operatorname{tr}\left(\boldsymbol{A}^{\top}\right)
$$

- 多个矩阵相乘得到的方阵的迹，和将这些矩阵中的最后一个挪到最前面之后相乘的迹是相同的。当然，我们需要考虑挪动之后矩阵乘积依然定义良好：$\operatorname{tr}(\boldsymbol{A} \boldsymbol{B} \boldsymbol{C})=\operatorname{tr}(\boldsymbol{C} \boldsymbol{A} \boldsymbol{B})=\operatorname{tr}(\boldsymbol{B} \boldsymbol{C} \boldsymbol{A})$
  - 或者更一般地：$
\operatorname{tr}\left(\prod_{i=1}^{n} \boldsymbol{F}^{(i)}\right)=\operatorname{tr}\left(\boldsymbol{F}^{(n)} \prod_{i=1}^{n-1} \boldsymbol{F}^{(i)}\right)$
  - 即使循环置换后矩阵乘积得到的矩阵形状变了，迹运算的结果依然不变。
    - 举例，假设矩阵 $\boldsymbol{A} \in \mathbb{R}^{m \times n}$ ，矩阵 $\boldsymbol{B} \in \mathbb{R}^{n \times m}$ ，我们可以得到：$\operatorname{tr}(\boldsymbol{A} \boldsymbol{B})=\operatorname{tr}(\boldsymbol{B} \boldsymbol{A})$。尽管 $\boldsymbol{A} \boldsymbol{B} \in \mathbb{R}^{m \times m}$ 和 $\boldsymbol{B} \boldsymbol{A} \in \mathbb{R}^{n \times n}$。
- 标量在迹运算后仍然是它自己：$a=\operatorname{tr}(a)$ 。



